<head>
  <head>
    <META HTTP-EQUIV="content-type" CONTENT="text/html; charset=ISO-8859-1">
    <META NAME="viewport" CONTENT="width=device-width, initial-scale=1.0">
    <title>hello</title>
    <style>
      body {
        margin: 0px;
      }
      #tableDiv {
        background-color: #c7cfb0;
        position: absolute;
        left: 8px;
        top: 8px;
      }
      #roomInfoDiv {
        position: fixed;
        top: 0px;
        left: 100%;
        transform: translateX(-100%);
        padding: 0.2em;
        background-color: rgba(224,224,224,0.5);
        font-size: 10pt; font-family: monospace;
        white-space: nowrap;
      }
      .roomCode {
        font-size: 20pt; font-weight: bold; font-family: monospace;
        text-align: center;
      }
      #helpDiv {
        position: fixed;
        top: 20px;
        left: 20px;
        padding: 0.2em;
        background-color: rgba(224,224,224,0.5);
        font-size: 10pt; font-family: monospace;
      }
      #helpDiv.helpExpanded {
        background-color: rgba(204,204,255,0.9);
      }
      #helpDiv p {
        margin: 0px;
      }
      #helpDiv.helpExpanded #helpContentsDiv {
        display: block !important;
      }
      #numberBufferDiv {
        position: fixed;
        top: 100%;
        left: 20px;
        transform: translateY(-100%);
        padding: 0.2em;
        background-color: rgba(224,224,224,0.5);
        font-size: 20pt; font-family: monospace; font-weight: bold;
      }
      #editUserDiv {
        position: fixed;
        left: 50%; top: 50%;
        transform: translate(-50%, -50%);
        padding: 0.2em;
        background-color: #ccf;
        font-size: 20pt; font-family: monospace; font-weight: bold;
      }
      #messageDiv {
        position: fixed;
        top: 0px;
        left: 100%;
        transform: translateX(-100%);
        padding: 0.2em;
        white-space: nowrap;
      }
      .gameObject {
        position: absolute;
        background-size: 100% 100%;
      }
      .backgroundObject {
        position: absolute;
        pointer-events: none;
      }
      .animatedMovement {
        transition-property: left, top, width, height;
        transition-duration: 0.2s;
      }
      .hoverSelect {
        box-shadow: 0 0 10px 5px rgba(256, 256, 0, 0.5);
      }
      .selected {
        box-shadow: 0 0 10px 5px rgba(256, 256, 0, 1.0);
      }
      .stackHeight {
        padding: 0.2em;
        background-color: rgba(256,256,256,0.7);
        pointer-events: none;
        border: 2px solid rgba(0,0,0,0.7);
        font-size: 20px; font-weight: bold; font-family: monospace;
        /* center */
        position: absolute;
        left: 50%; top: 50%;
        transform: translate(-50%, -50%);
      }
      .largeTextButon {
        font-size: 15pt;
      }
      .smallTextButton {
        font-size: 10pt;
        font-family: monospace;
      }
      ul {
        margin: 0px;
        padding: 0px;
        list-style-type: none;
      }
      #myUserNameLi {
        background-color: yellow;
        font-weight: bold;
        cursor: pointer;
      }
      #myUserNameLi:hover {
        text-decoration: underline;
      }
      #modalMaskDiv {
        position: fixed;
        display: block;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        background: #fff;
        opacity: 0.8;
      }
    </style>
  </head>
  <body>
    <div id="roomDiv" style="display:none;">
      <div id="tableDiv"></div>
      <div id="selectionRectangleDiv" style="position:absolute; display:none; border:4px dotted #aaa; pointer-events: none;"></div>
      <div id="helpDiv" class="helpExpanded">
        <p style="font-size: 1.3em;">Help</p>
        <p id="helpContentsDiv" style="margin-top: 1em; display: none;">
          Controls:<br>
          ?: Show/hide this help.<br>
          F: Flip object over or turn to next side.<br>
          R: Roll/flip object to show random side.<br>
          S: Shuffle.<br>
          G: Group into a stack.<br>
          Hold G+Drag: Fan out selected objects.<br>
          Z: Examine object.<br>
          Shift+Z: Examine stack of objects.<br>
          Ctrl+Z: Undo.<br>
          Ctrl+Y or Ctrl+Shift+Z: Redo.<br>
          Number+Click: Draw N objects from the top of a stack.<br>
        </p>
      </div>
      <div id="roomInfoDiv">
        <span style="text-align: center;">Room Code:</span><br><span id="roomCodeSpan" class="roomCode">???</span>
        <ul id="userListUl"></ul>
      </div>
      <div id="numberBufferDiv" style="display: none;"></div>
      <div id="editUserDiv" style="display: none;">
        <p>
          <label>Name: <input id="yourNameTextbox" placeholder="Your name" maxlength=16></label>
          <input id="submitYourNameButton" type="button" value="Submit">
        </p>
        <p><label>Role: <select id="yourRoleDropdown"></select></label></p>
        <p style="text-align: right;"><input id="closeEditUserButton" type="button" value="Close"></p>
      </div>
    </div>
    <div id="messageDiv">
      <ul id="messageUl"></ul>
      <span style="text-align: center;">Room Code:</span><br><span id="roomCodeSpan" class="roomCode">???</span>
    </div>
    <div id="loginDiv" style="display: none; text-align: center; font-size: 15pt;">
      <p><input id="createRoomButton" type="button" class="largeTextButon" value="Create a Room"></p>
      <p>
        Join a Room:
        <input id="roomCodeTextbox" placeholder="Room Code" class="roomCode" maxlength=5 style="width: 7em;">
        <input id="joinRoomButton" type="button" class="largeTextButon" value="Join">
      </p>
    </div>
    <div id="loadingDiv">
      <p id="loadingMessageDiv">Please wait...</p>
    </div>
    <div id="modalMaskDiv" style="display: none;"></div>
    <script src="client.js"></script>
  </body>
  <SCRIPT>
  function fixedSizes() {
    var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
    var h = window.innerHeight || document.documentElement.clientHeight || document.body.clientheight;
    var units = {vw: w / 100, vh: h / 100, vmin: (w > h ? h : w) / 100, vmax: (w > h ? w : h) / 100};
    var sheet = addSheet();
    for (var s = 0; s < document.styleSheets.length - 1; s++) {
        var rules = document.styleSheets[s].cssRules || document.styleSheets[s].rules;
        for (var r = 0; r < rules.length; r++) {
            var rule = rules[r];
            if (rule.type == CSSRule.STYLE_RULE) {
                var selector = rule.selectorText;
                var styles = rule.style.cssText.match(/[\w-]+\s?:\s?-?[\d\.]+(vw|vh|vmin|vmax)/g);
                for (var t = 0; styles && t < styles.length; t++) {
                    var style = styles[t];
                    var prop = style.match(/^[\w-]*/)[0];
                    var unit = style.match(/(vw|vh|vmin|vmax)$/)[0];
                    var val = parseFloat(style.match(/-?[\d\.]+(vw|vh|vmin|vmax)/)[0]) * units[unit];
                    addStyle(sheet, selector, prop + ": " + val + "px");
                }
            }
        }
    }

    function addSheet() {
        var s = document.createElement("style");
        s.type = "text/css";
        s.rel = "stylesheet";
        s.media = "screen";
        document.getElementsByTagName("head")[0].appendChild(s);
        return(document.styleSheets[document.styleSheets.length - 1]);
    }

    function addStyle(sheet, selector, style) {
        if (sheet.addRule) {
            sheet.addRule(selector, style);
        }
        else if (sheet.insertRule) {
            sheet.insertRule(selector + " { " + style + " }");
        }
     }
  }

  if (CSSRule) {
    if (document.addEventListener) {
        document.addEventListener("DOMContentLoaded", fixedSizes, false);
    }
    else if (window.attachEvent) {
        window.attachEvent("onload", fixedSizes);
    }
  }
</SCRIPT>
</head>
